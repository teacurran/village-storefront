# Village Storefront Application Configuration

# Application name
quarkus.application.name=village-storefront

# HTTP configuration
quarkus.http.port=8080

# Database configuration (PostgreSQL)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:storefront}
quarkus.datasource.password=${DB_PASSWORD:storefront}
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/storefront}

# Hibernate ORM
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# Quinoa (Vue.js admin dashboard) - disabled until frontend is initialized
quarkus.quinoa.enabled=false
# quarkus.quinoa.package-manager-install=true
# quarkus.quinoa.package-manager-command.install=npm ci
# quarkus.quinoa.package-manager-command.build=npm run build
# quarkus.quinoa.dev-server.port=5173
# quarkus.quinoa.ui-dir=src/main/webui

# OpenAPI
quarkus.smallrye-openapi.path=/openapi

# Health checks
quarkus.health.extensions.enabled=true

# Logging
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
quarkus.log.level=INFO

# JWT configuration
mp.jwt.verify.issuer=https://village-storefront.example.com
mp.jwt.verify.publickey.location=publicKey.pem
smallrye.jwt.sign.key.location=privateKey.pem

# Metrics
quarkus.micrometer.export.prometheus.enabled=true

# OpenTelemetry
quarkus.otel.enabled=false
quarkus.otel.exporter.otlp.endpoint=http://localhost:4317

# Mailer (disabled in dev)
quarkus.mailer.mock=true

# Test profile configuration
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.hibernate-orm.log.sql=true
%test.quarkus.quinoa.just-build=true

# Disable JWT verification for tests (use @TestSecurity for auth testing)
%test.mp.jwt.verify.publickey.location=
%test.smallrye.jwt.sign.key.location=
%test.quarkus.smallrye-jwt.enabled=false
